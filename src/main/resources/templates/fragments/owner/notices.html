<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="notices">
        <div class="container mt-4">
            <h2 class="mb-4">공지사항 관리</h2>
            
            <!-- 공지사항 작성 버튼 -->
            <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#createNoticeModal">
                <i class="fas fa-plus"></i> 새 공지사항 작성
            </button>

            <!-- 공지사항 목록 -->
            <div class="notice-list">
                <!-- TODO: 백엔드에서 공지사항 목록을 가져와 반복 처리 -->
                <div th:each="notice : ${notices}" class="notice-card" th:classappend="${notice.isDeleted ? 'deleted' : ''}">
                    <div class="notice-image">
                        <!-- TODO: 실제 이미지 경로로 변경 -->
                        <img src="https://via.placeholder.com/300x200" alt="공지사항 이미지">
                    </div>
                    <div class="notice-content">
                        <h3 th:text="${notice.title}">공지사항 제목</h3>
                        <p th:text="${notice.content}">공지사항 내용...</p>
                        <div class="notice-footer">
                            <span class="notice-date" th:text="${#temporals.format(notice.createdAt, 'yyyy-MM-dd HH:mm')}">2023-05-20 14:30</span>
                            <span class="notice-status" th:text="${notice.isDeleted ? '삭제됨' : '작성 완료'}">작성 완료</span>
                            <button th:if="${!notice.isDeleted}" class="btn btn-sm btn-outline-danger delete-notice" th:data-id="${notice.id}">
                                <i class="fas fa-trash"></i> 삭제
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 예시 1: 일반 공지사항 -->
                <div class="notice-card">
                    <div class="notice-image">
                        <img src="/images/notice1.jpg" alt="신메뉴 출시 안내">
                    </div>
                    <div class="notice-content">
                        <h3>신메뉴 '트러플 파스타' 출시 안내</h3>
                        <p>고객님들의 성원에 힘입어 새로운 메뉴 '트러플 파스타'를 출시하게 되었습니다. 풍부한 트러플 향과 크리미한 소스의 조화를 즐겨보세요.</p>
                        <div class="notice-footer">
                            <span class="notice-date">2024-05-25 10:00</span>
                            <span class="notice-status">작성 완료</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteNotice(1)">
                                <i class="fas fa-trash"></i> 삭제
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 예시 2: 삭제된 공지사항 -->
                <div class="notice-card deleted">
                    <div class="notice-image">
                        <img src="/images/notice2.jpg" alt="임시 휴업 안내">
                    </div>
                    <div class="notice-content">
                        <h3>임시 휴업 안내 (5월 30일)</h3>
                        <p>내부 시설 점검으로 인해 5월 30일 하루 동안 임시 휴업합니다. 고객님들의 양해 부탁드립니다.</p>
                        <div class="notice-footer">
                            <span class="notice-date">2024-05-20 14:30</span>
                            <span class="notice-status">삭제됨</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 페이지네이션 -->
            <nav aria-label="Page navigation" class="mt-4">
                <ul class="pagination justify-content-center">
                    <!-- TODO: 백엔드에서 페이지네이션 정보를 받아와 동적으로 생성 -->
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">이전</a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">다음</a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- 공지사항 작성 모달 -->
        <div class="modal fade" id="createNoticeModal" tabindex="-1" aria-labelledby="createNoticeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createNoticeModalLabel">새 공지사항 작성</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!-- TODO: 백엔드와 연동하여 공지사항 작성 폼 구현 -->
                        <form id="createNoticeForm">
                            <div class="mb-3">
                                <label for="noticeTitle" class="form-label">제목</label>
                                <input type="text" class="form-control" id="noticeTitle" required>
                            </div>
                            <div class="mb-3">
                                <label for="noticeContent" class="form-label">내용</label>
                                <textarea class="form-control" id="noticeContent" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="noticeImage" class="form-label">이미지</label>
                                <input type="file" class="form-control" id="noticeImage" accept="image/*">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-primary" onclick="createNotice()">작성</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 공지사항 삭제 확인 모달 -->
        <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteConfirmModalLabel">공지사항 삭제 확인</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        정말로 이 공지사항을 삭제하시겠습니까?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-danger" id="confirmDelete">삭제</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 공지사항 관련 JavaScript -->
        <script th:inline="javascript">
            
            let noticeIdToDelete;
        
        // 공지사항 작성
        function createNotice() {
            // TODO: 백엔드 API와 연동하여 공지사항 작성 로직 구현
            console.log('공지사항 작성');
            $('#createNoticeModal').modal('hide');
        }
        
        // 공지사항 삭제 확인 모달 표시
        function deleteNotice(noticeId) {
                noticeIdToDelete = noticeId;
                $('#deleteConfirmModal').modal('show');
            }

            // 삭제 확인 시 실행되는 함수
            $(document).ready(function() {
                $('#confirmDelete').click(function() {
                    // TODO: 백엔드 API와 연동하여 공지사항 삭제 로직 구현
                    console.log('공지사항 삭제: ' + noticeIdToDelete);
                    $('#deleteConfirmModal').modal('hide');
                    // 삭제 후 페이지 새로고침 또는 해당 공지사항 행 제거 로직 추가
                });
            });
        </script>
    </div>
</body>
</html>
