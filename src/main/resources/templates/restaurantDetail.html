<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/restaurantDetail.css">
    <link rel="stylesheet" href="/css/common.css"/>
    <title>FoodPolio - 음식점 상세 정보</title>
    <style>
    </style>
</head>
<body>
    <div th:replace="fragments/header :: header"></div>
    
    <div class="restaurant-banner" style="background-image: url('https://via.placeholder.com/1200x400');">
        <div class="container">
            <div class="restaurant-info">
                <h1 class="restaurant-name">추형진의 양식집</h1>
                <div class="restaurant-meta">
                    <div class="rating">
                        <span class="stars">★★★★☆</span>
                        <span class="review-count">1,234 리뷰</span>
                    </div>
                    <div class="price-category">
                        <span class="price">₩₩</span>
                        <span class="category">• 이탈리안 • 파스타 • 피자</span>
                    </div>
                </div>
                <div class="restaurant-status">
                    <span class="open-now">영업중</span>
                    <span class="hours">11:00 - 21:00</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="main-content">
            <div class="tabs">
                <div class="tab active" data-tab="info">정보</div>
                <div class="tab" data-tab="reviews">리뷰</div>
                <div class="tab" data-tab="community">커뮤니티</div>
            </div>
            
            <div class="content-area">
                <div class="flex-container">
                    <div id="info" class="tab-content">
                        <div class="menu-section">
                            <h2>인기 메뉴</h2>
                            <div class="menu-items-container">
                                <div class="menu-items">
                                    <div class="menu-item">
                                        <div class="image-placeholder" alt="트러플 크림 파스타"></div>
                                        <h3>트러플 크림 파스타</h3>
                                        <p>18,000원</p>
                                    </div>
                                    <div class="menu-item">
                                        <div class="image-placeholder" alt="마르게리타 피자"></div>
                                        <h3>마르게리타 피자</h3>
                                        <p>22,000원</p>
                                    </div>
                                    <!-- 추가 메뉴 아이템 -->
                                </div>
                            </div>
                            <button class="view-full-menu">전체 메뉴 보기</button>
                        </div>      

                        <div class="tab-divider"></div>

                        <h2>위치 및 영업시간</h2>
                        <div class="map-placeholder">
                            네이버 지도 API가 여기에 표시
                        </div>
                        <table class="hours-table">
                            <tr><td>월요일</td><td>11:00 AM - 11:00 PM</td></tr>
                            <tr><td>화요일</td><td>11:00 AM - 11:00 PM</td></tr>
                            <tr><td>수요일</td><td>11:00 AM - 11:00 PM</td></tr>
                            <tr><td>목요일</td><td>11:00 AM - 11:00 PM</td></tr>
                            <tr><td>금요일</td><td>11:00 AM - 12:00 AM (다음날)</td></tr>
                            <tr><td>토요일</td><td>11:00 AM - 12:00 AM (다음날)</td></tr>
                            <tr><td>일요일</td><td>11:00 AM - 11:00 PM</td></tr>
                        </table>

                        <div class="tab-divider"></div>
                        <div class="additional-info">
                            <h2>추가 정보</h2>
                            <ul>
                                <li>주차 가능</li>
                                <li>무료 Wi-Fi</li>
                                <li>예약 권장</li>
                                <li>테이크아웃 가능</li>
                            </ul>
                        </div>
                        
                    </div>
                    
                    <div id="reviews" class="tab-content">
                        <h2>리뷰</h2>
                        <div class="review-summary">
                            <div class="review-cards">
                                <div class="review-card">
                                    <h3>전체 평점</h3>
                                    <div class="rating">★★★★☆ 4.5</div>
                                    <p>1,234 리뷰</p>
                                </div>
                            </div>
                        </div>
                        <div class="review-list">
                            <div class="popular-reviews">
                                <h3>인기 리뷰</h3>
                                <div class="popular-review-cards">
                                    <div class="popular-review-card">
                                        <div class="review-content">
                                            <h4>최고의 파스타 맛집!</h4>
                                            <p>트러플 크림 파스타가 정말 일품이에요. 분위기도 좋고 서비스도 친절해요.</p>
                                            <div class="review-footer">
                                                <span class="reviewer">작성자: 김맛있다</span>
                                                <span class="likes">👍 좋아요 128</span>
                                            </div>
                                        </div>
                                        <div class="image-placeholder">인기 리뷰 이미지</div>
                                    </div>
                                    <div class="popular-review-card">
                                        <div class="review-content">
                                            <h4>데이트 코스로 완벽해요</h4>
                                            <p>와인과 스테이크의 조화가 환상적이에요. 연인과 함께 오기 좋은 곳입니다.</p>
                                            <div class="review-footer">
                                                <span class="reviewer">작성자: 박데이트</span>
                                                <span class="likes">👍 좋아요 95</span>
                                            </div>
                                        </div>
                                        <div class="image-placeholder">인기 리뷰 이미지</div>
                                    </div>
                                </div>
                            </div>
                            <div class="recent-reviews">
                                <h3>최근 리뷰</h3>
                                <div class="review-items">
                                    <div class="review-item">
                                        <h4 class="review-title">맛있는 파스타와 분위기 좋은 레스토랑</h4>
                                        <div class="review-header">
                                            <div class="review-text">
                                                <p>파스타가 정말 맛있었어요. 특히 트러플 크림 파스타는 꼭 드셔보세요!</p>
                                            </div>
                                            <div class="review-info">
                                                <span class="reviewer-name">홍길동</span>
                                                <span class="review-date">2023-05-01</span>
                                                <div class="rating">★★★★☆ 4.5</div>
                                            </div>
                                        </div>
                                        <div class="review-images">
                                            <div class="image-placeholder">사진 1</div>
                                            <div class="image-placeholder">사진 2</div>
                                            <div class="more-images">+2</div>
                                        </div>
                                        <div class="menu-info">
                                            <span class="menu-name">트러플 크림 파스타</span>
                                            <span class="menu-price">18,000원</span>
                                        </div>
                                        <div class="review-actions">
                                            <button class="like-button">👍 좋아요 (15)</button>
                                            <button class="dislike-button">👎 싫어요 (2)</button>
                                            <button class="comment-button">💬 댓글 (3)</button>
                                        </div>
                                        <div class="comments-section" style="display: none;">
                                            <div class="comment">
                                                <p><strong>홍길동:</strong> 정말 맛있어 보이네요! 저도 꼭 가보고 싶어요.</p>
                                            </div>
                                            <div class="comment">
                                                <p><strong>김철수:</strong> 파스타가 특히 맛있다고 하던데 사실인가요?</p>
                                            </div>
                                            <form class="comment-form">
                                                <textarea placeholder="댓글을 입력하세요..." required></textarea>
                                                <button type="submit">댓글 작성</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="write-review">
                                <a href="/receipt-verification" class="write-review-button">리뷰 작성하기</a>
                            </div>
                        </div>
                    </div>
                    
                    <div id="community" class="tab-content">
                        <h2>커뮤니티</h2>
                        <div class="community-posts">
                            <!-- 커뮤니티 게시글 목록 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-content">
            <div class="sidebar-info">
                <h3>식당 정보</h3>
                <p><strong>홈페이지:</strong> <a href="http://www.example.com">www.example.com</a></p>
                <p><strong>전화번호:</strong> 02-1234-5678</p>
                <p><strong>주소:</strong> 서울시 강남구 테헤란로 123</p>
            </div>
        </div>
    </div>

    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h2 id="modalReviewTitle"></h2>
            <p id="modalReviewContent"></p>
            <div id="modalReviewInfo"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 탭과 탭 컨텐츠 요소들을 선택합니다.
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const infoTab = document.querySelector('.tab[data-tab="info"]');
            const infoContent = document.getElementById('info');
        
            // 기본적으로 'info' 탭을 활성화합니다.
            if (infoTab && infoContent) {
                infoTab.classList.add('active');
                infoContent.classList.add('active');
            }
    
            // 각 탭에 클릭 이벤트 리스너를 추가합니다.
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    // 모든 탭과 컨텐츠의 'active' 클래스를 제거합니다.
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    // 클릭된 탭과 해당 컨텐츠를 활성화합니다.
                    tab.classList.add('active');
                    const activeContent = document.getElementById(tabId);
                    if (activeContent) {
                        activeContent.classList.add('active');
                    }
                });
            });
    
            // 리뷰 모달 관련 요소들을 선택합니다.
            const reviewTab = document.getElementById('reviews');
            const reviewModal = document.getElementById('reviewModal');
            const modalReviewTitle = document.getElementById('modalReviewTitle');
            const modalReviewContent = document.getElementById('modalReviewContent');
            const modalReviewInfo = document.getElementById('modalReviewInfo');
            const closeModal = document.querySelector('.close');
    
            // 리뷰 탭에 클릭 이벤트 리스너를 추가합니다.
            reviewTab.addEventListener('click', function(e) {
                if (e.target.classList.contains('image-placeholder')) {
                    const reviewItem = e.target.closest('.review-item');
                    if (reviewItem) {
                        // 클릭된 리뷰의 정보를 모달에 표시합니다.
                        const title = reviewItem.querySelector('.review-title').textContent;
                        const content = reviewItem.querySelector('.review-text').textContent;
                        const info = reviewItem.querySelector('.review-info').innerHTML;
    
                        modalReviewTitle.textContent = title;
                        modalReviewContent.textContent = content;
                        modalReviewInfo.innerHTML = info;
    
                        // 모달을 표시합니다.
                        reviewModal.style.display = 'block';
                    }
                }
            });
    
            // 모달 닫기 버튼에 이벤트 리스너를 추가합니다.
            closeModal.onclick = function() {
                reviewModal.style.display = 'none';
            }
    
            // 모달 외부 클릭 시 모달을 닫습니다.
            window.onclick = function(event) {
                if (event.target == reviewModal) {
                    reviewModal.style.display = 'none';
                }
            }
    
            // 댓글 버튼에 이벤트 리스너를 추가합니다.
            document.querySelectorAll('.comment-button').forEach(button => {
                button.addEventListener('click', function() {
                    const commentsSection = this.closest('.review-item').querySelector('.comments-section');
                    // 댓글 섹션을 토글합니다.
                    commentsSection.style.display = commentsSection.style.display === 'none' ? 'block' : 'none';
                });
            });
        });
    </script>
    </body>
</html>